<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Source: generators/basic/index.js</title>
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <script src="scripts/jquery.min.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/bootstrap.min.css">
    <link type="text/css" rel="stylesheet" href="styles/jaguar.css">
    
    
    <script>
    var config = {"default":{"outputSourceFiles":true},"monospaceLinks":false,"cleverLinks":false};
    </script>
    

    
</head>
<body>
<div id="wrap" class="clearfix">
    
<div class="navigation">
    <h3 class="applicationName"><a href="index.html"></a></h3>

    <div class="search">
        <input id="search" type="text" class="form-control input-sm" placeholder="Search Documentations">
    </div>
    <ul class="list">
    
        <li class="item" data-name="BasicTask">
            <span class="title">
                <a href="BasicTask.html">BasicTask</a>
                
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li data-name="BasicTask#completions"><a href="BasicTask.html#completions">completions</a></li>
            
                <li data-name="BasicTask#currentStage"><a href="BasicTask.html#currentStage">currentStage</a></li>
            
                <li data-name="BasicTask#def"><a href="BasicTask.html#def">def</a></li>
            
                <li data-name="BasicTask#id"><a href="BasicTask.html#id">id</a></li>
            
                <li data-name="BasicTask#prompt"><a href="BasicTask.html#prompt">prompt</a></li>
            
                <li data-name="BasicTask#stages"><a href="BasicTask.html#stages">stages</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="BasicTask#addStage"><a href="BasicTask.html#addStage">addStage</a></li>
            
                <li data-name="BasicTask#getId"><a href="BasicTask.html#getId">getId</a></li>
            
                <li data-name="BasicTask#hasBefore"><a href="BasicTask.html#hasBefore">hasBefore</a></li>
            
                <li data-name="BasicTask#hasDefault"><a href="BasicTask.html#hasDefault">hasDefault</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
    </ul>
</div>
    <div class="main">
        <h1 class="page-title" data-filename="index.js_.html">Source: generators/basic/index.js</h1>
        


    
    <section>
        <article>
            <pre class="prettyprint source "><code>/**
 * Basic generator module
 * @module project-generator/basic
 * @see module:project-generator
 */
var readline = require('readline');

function proxy(fn,ctx){
	return function(){
		return fn.apply(ctx,arguments);
	}
}

var Generator = function(){
	this.tasks = [];
	this.completions = [];
	this.currentTask = null;
	this.rl = null;
	this.init();
};

Generator.prototype = {
	init:function(){
		this.rl = readline.createInterface({
		  input: process.stdin,
		  output: process.stdout,
		  completer:proxy(this.completer,this)
		});
	},
	next:function(){
		if (this.currentTask){
			this.currentTask.before();
			this.rl.question(this.currentTask.getPrompt(),
				proxy(this.callback,this));
		}else if (this.tasks.length > 0){
			this.skip();
		}else {
			console.log('done');
			this.rl.close();
		}
	},
	completer:function(line){
		if (this.currentTask.hasOnComplete()){
			return this.currentTask.onComplete(line);
		}
		if (!this.currentTask.hasCompletions()){
			return [];
		}
		var completions = this.currentTask.getCompletions();
	  	var hits = completions.filter(function(c){
	  		return c.indexOf(line) == 0;
	  	});
	  	return [hits.length?hits: completions, line];
	},
	skip:function(){
		this.currentTask = this.tasks.shift();
		this.next();
	},
	callback:function(answer){
		var a = answer.trim();
		if (answer &amp;&amp; answer.trim() !== ""){
			this.currentTask.execute(answer,this);
		} else {
			if (this.currentTask.hasDefault()){
				this.currentTask.execute(this.currentTask.getDefault(),this);
			}else if (!this.currentTask.isDone()){
				this.currentTask.next();
			}else{
				this.skip();
			}
		}
		this.next();
	},
	register:function(task){
		this.tasks.push(task);
	}
};
module.exports = Generator;</code></pre>
        </article>
    </section>






        

        <footer>
            Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.3.0-alpha5</a> on Tue May 19 2015 16:08:37 GMT+0100 (BST)
        </footer>
    </div>
</div>
<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
<script src="scripts/main.js"></script>
</body>
</html>
